name: Dispatch to trigger new release of the R package
# After a new release, this Action triggers the R package repository to update
# the pinned version of the app and create a new release.
#
# https://github.com/abbvie-external/OmicNavigator/releases
# https://github.com/peter-evans/repository-dispatch
on:
  release:
    types: [published]
jobs:
  dispatch:
    runs-on: ubuntu-latest
    steps:
      - name: Repository Dispatch
        uses: peter-evans/repository-dispatch@v1
        with:
          token: ${{ secrets.REPO_ACCESS_TOKEN }}
          repository: abbvie-external/OmicNavigator
          event-type: app-release
          client-payload: '{
            "repository": "${{ github.repository }}",
            "ref": "${{ github.ref }}",
            "sha": "${{ github.sha }}",
            "workflow": "${{ github.workflow }}",
            "run_id": "${{ github.run_id }}",
            "run_number": "${{ github.run_number }}"
          }'
